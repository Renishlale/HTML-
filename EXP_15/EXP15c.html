<!DOCTYPE html>
<html>
<head>
    <title>EXP 15c - To-Do List with Priority & Filter</title>
</head>
<body>
    <h2>EXP 15c - To-Do List</h2>
    <input type="text" id="taskInput" placeholder="Enter task">
    <select id="taskPriority">
        <option value="High">High</option>
        <option value="Medium" selected>Medium</option>
        <option value="Low">Low</option>
    </select>
    <button onclick="addTask()">Add Task</button>

    <div>
        Filter: 
        <select id="filterPriority" onchange="renderTasks()">
            <option value="All">All</option>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
        </select>
    </div>

    <ul id="taskList"></ul>

    <script>
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        function saveTasks() { localStorage.setItem('tasks', JSON.stringify(tasks)); }

        function addTask() {
            const name = document.getElementById('taskInput').value.trim();
            const priority = document.getElementById('taskPriority').value;
            if(!name) return;
            tasks.push({ name, priority, completed: false });
            saveTasks();
            document.getElementById('taskInput').value='';
            renderTasks();
        }

        function toggleComplete(i) { tasks[i].completed = !tasks[i].completed; saveTasks(); renderTasks(); }
        function deleteTask(i) { tasks.splice(i,1); saveTasks(); renderTasks(); }

        function renderTasks() {
            const list = document.getElementById('taskList');
            const filter = document.getElementById('filterPriority').value;
            list.innerHTML='';
            tasks.forEach((task,i)=>{
                if(filter!=='All' && task.priority!==filter) return;
                const li = document.createElement('li');
                li.textContent = `${task.name} [${task.priority}]`;
                li.style.textDecoration = task.completed?'line-through':'none';
                li.onclick = () => toggleComplete(i);
                const delBtn = document.createElement('button');
                delBtn.textContent='Delete';
                delBtn.onclick=(e)=>{e.stopPropagation(); deleteTask(i);};
                li.appendChild(delBtn);
                list.appendChild(li);
            });
        }

        renderTasks();
    </script>
</body>
</html>